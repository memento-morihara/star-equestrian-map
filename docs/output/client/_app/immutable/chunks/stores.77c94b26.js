import{w as p,r as L}from"./index.7a2d8fa9.js";import{r as O,a1 as D,a3 as f,a7 as F,a8 as $}from"./scheduler.8eef7868.js";import"./index.be8e8663.js";function J(e,t){const s={},o={},a={$$scope:1};let r=e.length;for(;r--;){const l=e[r],c=t[r];if(c){for(const n in l)n in c||(o[n]=1);for(const n in c)a[n]||(s[n]=c[n],a[n]=1);e[r]=c}else for(const n in l)a[n]=1}for(const l in o)l in s||(s[l]=void 0);return s}function K(e){return typeof e=="object"&&e!==null?e:{}}const U="modalStore";function X(){const e=D(U);if(!e)throw new Error("modalStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return e}function Z(){const e=z();return O(U,e)}function z(){const{subscribe:e,set:t,update:s}=p([]);return{subscribe:e,set:t,update:s,trigger:o=>s(a=>(a.push(o),a)),close:()=>s(o=>(o.length>0&&o.shift(),o)),clear:()=>t([])}}const k={};function v(e){return e==="local"?localStorage:sessionStorage}function h(e,t,s){const o=s?.serializer??JSON,a=s?.storage??"local";function r(l,c){v(a).setItem(l,o.stringify(c))}if(!k[e]){const l=p(t,i=>{const d=v(a).getItem(e);d&&i(o.parse(d));{const g=m=>{m.key===e&&i(m.newValue?o.parse(m.newValue):null)};return window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)}}),{subscribe:c,set:n}=l;k[e]={set(i){r(e,i),n(i)},update(i){const d=i(f(l));r(e,d),n(d)},subscribe:c}}return k[e]}const j=h("modeOsPrefers",!1),I=h("modeUserPrefers",void 0),N=h("modeCurrent",!1);function ee(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return j.set(e),e}function te(e){I.set(e)}function se(e){const t=document.documentElement.classList,s="dark";e===!0?t.remove(s):t.add(s),N.set(e)}function oe(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",s=!("modeUserPrefers"in localStorage),o=window.matchMedia("(prefers-color-scheme: dark)").matches;t||s&&o?e.add("dark"):e.remove("dark")}function re(){const e=window.matchMedia("(prefers-color-scheme: light)");function t(s){const o=document.documentElement.classList,a="dark";s===!0?o.remove(a):o.add(a)}t(e.matches),e.onchange=()=>{t(e.matches)}}const x="(prefers-reduced-motion: reduce)";function R(){return window.matchMedia(x).matches}const ae=L(R(),e=>{{const t=o=>{e(o.matches)},s=window.matchMedia(x);return s.addEventListener("change",t),()=>{s.removeEventListener("change",t)}}});function E(e){const t=e-1;return t*t*t+1}function ne(e,{delay:t=0,duration:s=400,easing:o=F}={}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:o,css:r=>`opacity: ${r*a}`}}function ie(e,{delay:t=0,duration:s=400,easing:o=E,x:a=0,y:r=0,opacity:l=0}={}){const c=getComputedStyle(e),n=+c.opacity,i=c.transform==="none"?"":c.transform,d=n*(1-l),[g,m]=$(a),[C,b]=$(r);return{delay:t,duration:s,easing:o,css:(y,M)=>`
			transform: ${i} translate(${(1-y)*g}${m}, ${(1-y)*C}${b});
			opacity: ${n-d*M}`}}function ce(e,{delay:t=0,duration:s=400,easing:o=E,axis:a="y"}={}){const r=getComputedStyle(e),l=+r.opacity,c=a==="y"?"height":"width",n=parseFloat(r[c]),i=a==="y"?["top","bottom"]:["left","right"],d=i.map(u=>`${u[0].toUpperCase()}${u.slice(1)}`),g=parseFloat(r[`padding${d[0]}`]),m=parseFloat(r[`padding${d[1]}`]),C=parseFloat(r[`margin${d[0]}`]),b=parseFloat(r[`margin${d[1]}`]),y=parseFloat(r[`border${d[0]}Width`]),M=parseFloat(r[`border${d[1]}Width`]);return{delay:t,duration:s,easing:o,css:u=>`overflow: hidden;opacity: ${Math.min(u*20,1)*l};${c}: ${u*n}px;padding-${i[0]}: ${u*g}px;padding-${i[1]}: ${u*m}px;margin-${i[0]}: ${u*C}px;margin-${i[1]}: ${u*b}px;border-${i[0]}-width: ${u*y}px;border-${i[1]}-width: ${u*M}px;`}}const S=[{name:"chest",label:"Chests",items:["common-chest","uncommon-chest","rare-chest","epic-chest","legendary-chest"]},{name:"collectible",label:"Collectibles",items:["bottle","toy-unicorn","sheriff-badge","horseshoe","brazier"]},{name:"food",label:"Food",items:["apple","berries","brown-mushroom","carrot","daikon-radish","grapes","honey","lettuce","lemon","orange","pumpkin","purple-carrot","strawberries","truffle","turnip","watermelon","wheat","white-mushroom","zucchini"]},{name:"npc",label:"NPCs",items:["butterflies-trader","eggs-trader","fish-trader","milk-trader","wool-trader"]},{name:"other",label:"Other",items:["cave-entrance","picnic-basket","quest-item","buried-treasure"]},{name:"resource",label:"Resources",items:["butterflies","eggs","fish","milk","wool"]},{name:"tack",label:"Tack Upgrade",items:["leather","wood"]}];function le(e){return e.split(" ").join("-").toLowerCase()}function de(e,t){return t?e.split("-").map((s,o)=>(o>0?s[0].toUpperCase():s[0])+s.slice(1)).join(""):e.split("-").map(s=>s[0].toUpperCase()+s.slice(1)).join(" ")}const ue=S.flatMap(e=>e.name),pe=S.flatMap(e=>e.items),w=e=>{if(e){const t=new Date(e),s=new Date;return t.getUTCDate()===s.getUTCDate()&&t.getUTCMonth()===s.getUTCMonth()&&t.getUTCFullYear()===s.getUTCFullYear()}else return!1},fe=e=>{if(e.options.markerType!=="respawning")return;const t=f(e.options.store);return w(t.lastChecked[0])?1:w(t.lastCollected[0])||t.lastCollected[0]<t.lastChecked[0]?0:-1},me=e=>{const t=f(e.options.store);switch(e.options.markerType){case"one-time":return t.collected?1:-1;case"respawning":return w(t.lastCollected[0])?1:t.lastCollected[0]>t.lastChecked[0]&&!w(t.lastChecked[0])?0:-1}};function ge(){let e=[];return f(B).flatMap(t=>{const s=f(t.options.store);t.options.markerType==="respawning"?(s?.lastCollected[0]||s?.lastCollected[1]||s?.lastChecked[0]||s?.lastChecked[1])&&e.push({id:t.options.id,...s}):t.options.markerType==="one-time"&&s?.collected&&e.push({id:t.options.id,...s})}),e}async function he(e){return await fetch(e).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>new TextDecoder("utf-8").decode(t))}const ye=(e,t,s)=>{const o={settings:f(q),selectedMarker:f(H)};o.settings.keepSpiderfied&&!o.settings.closePopups?t.stopImmediatePropagation():o.settings.keepSpiderfied&&(t.stopPropagation(),o.selectedMarker.closePopup());let a=f(o.selectedMarker.options.store);e==="collected"?o.selectedMarker.options.store.update(()=>({collected:!s})):s?(a[e].reverse(),o.selectedMarker.options.store.update(r=>({...r,...a}))):(a[e].unshift(new Date),a[e]=a[e].slice(0,2),o.selectedMarker.options.store.update(r=>({...r,...a}))),o.selectedMarker.options.toggle(),s&&o.selectedMarker.setOpacity(1),e!=="lastChecked"&&(Y.update(r=>r+=s?-1:1),W.update(r=>r+=(s?-1:1)*(o.selectedMarker.options?.rarity?o.selectedMarker.options.rarity:0)))},we=p(),H=p(void 0),Ce=p({width:null,height:null});let _=[];S.flatMap(e=>_=[..._,...e.items,e.name]);const be=h("filters",_),P={keepOnTop:!1,closePopups:!0,hideCollectedMarkers:!1,markerOpacity:.3,spiderfyMarkers:!0,hoverMarkers:!1,keepSpiderfied:!0,broncoEnabled:!1,loadImages:!0};let T={};const V=()=>{for(const e of Object.keys(P))T[e]=P[e];return T},q=h("settings",V()),B=p([]),Me=p([]),W=p(0),Y=p(0);export{le as A,pe as B,S as C,ue as D,de as E,ge as F,V as G,W as H,Y as I,ie as a,J as b,K as c,se as d,ee as e,ne as f,X as g,te as h,Z as i,re as j,q as k,we as l,N as m,H as n,fe as o,ae as p,me as q,ce as r,oe as s,he as t,ye as u,be as v,Ce as w,Me as x,B as y,h as z};
